process BTagDemo2 =  {
  #keep the logging output to a nice level
  include "FWCore/MessageLogger/data/MessageLogger.cfi"

  source = PoolSource {
   untracked vstring fileNames = {
'file:/data/arizzi/test17x/123EB297-096F-DC11-960F-00304885B264.root'
#'file:/data/arizzi/test17x/CMSSW_1_7_0_pre5/src/BJets_Pt_50_120.root'
 }
  }
  
  untracked PSet maxEvents = {untracked int32 input = -1}

   # Magnetic Field
    include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"
    include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"
include "Configuration/StandardSequences/data/Reconstruction.cff"
include "Configuration/StandardSequences/data/Simulation.cff"
include "Configuration/StandardSequences/data/MixingNoPileUp.cff"

include "Configuration/StandardSequences/data/VtxSmearedGauss.cff"

    include "TrackingTools/TransientTrack/data/TransientTrackBuilder.cfi"
   include "RecoBTag/ImpactParameter/data/impactParameter.cff"

   include "RecoBTag/TrackProbability/data/trackProbabilityFakeCond.cfi"
#    include "RecoBTag/TrackProbability/data/trackProbabilityFrontierCond.cfi"

    module out = PoolOutputModule {
        untracked string fileName = 'btag2.root'
    }

  module ipAnalyzer = IPAnalyzer {
        InputTag jets          = iterativeCone5CaloJets
        InputTag association   = ic5JetTracksAssociatorAtVertex
        InputTag ipassociation = impactParameterTagInfos
    }



  include "RecoJets/JetAssociationProducers/data/ic5JetTracksAssociatorAtVertex.cfi"

  include "RecoBTag/Analysis/data/bJetTagAnalysis.cfi"
  replace bJetTagAnalysis.fastMC = false
  replace bJetTagAnalysis.rootfile = "jetTagAnalysis.root"
  replace bJetTagAnalysis.jetTagModuleLabel = { "jetProbabilityBJetTags","jetBProbabilityBJetTags", "trackCountingHighEffBJetTags", "trackCountingHighPurJetTags"}

 
//  path p = {ic5JetTracksAssociatorAtVertex,impactParameterTagInfos, jetProbabilityBJetTags, jetBProbabilityBJetTags, trackCountingHighEffBJetTags, trackCountingHighPurBJetTags,bJetTagAnalysis }
  path p = {ic5JetTracksAssociatorAtVertex, impactParameterTagInfos,ipAnalyzer}

//  endpath outpath = { out }

}
